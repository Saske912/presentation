---
theme: ../themes/custom
layout: cover
background: '#1e3a8a'
class: text-center
highlighter: shiki
lineNumbers: false
info: |
  ## Infrastructure as Code –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω
  –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
drawings:
  persist: false
transition: slide-left
title: IaC –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏
mdc: true
---

# Infrastructure as Code
## –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏

**Proxmox + Packer + Terraform**

–û—Ç —Ö–∞–æ—Å–∞ –∫ –ø–æ—Ä—è–¥–∫—É

---
layout: section
---

# –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞

---

# –ß—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Å–µ–π—á–∞—Å üéØ

<v-clicks>

## –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ

- **Proxmox –∫–ª–∞—Å—Ç–µ—Ä** - –Ω–∞–¥—ë–∂–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏
- **–û–ø—ã—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** - –∑–Ω–∞—é—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑–Ω—É—Ç—Ä–∏
- **–†–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã** - VM —Å–æ–∑–¥–∞—é—Ç—Å—è, –≤—Å—ë —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

## –ù–æ –µ—Å—Ç—å –≤—ã–∑–æ–≤—ã —Ä–æ—Å—Ç–∞ üìà

**–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–æ**
- –ö–∞–∂–¥–∞—è –Ω–æ–≤–∞—è VM —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- –¢–µ—Å—Ç–æ–≤—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–µ–¥–∫–æ –∏–∑-–∑–∞ —Ç—Ä—É–¥–æ–µ–º–∫–æ—Å—Ç–∏
- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ "–ø—Ä–∏–±–∏—Ç–∞ –∫ –ø–æ–ª—É"**
- –°–ª–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ª–µ–≥–∫–æ —Ç–∏—Ä–∞–∂–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ó–Ω–∞–Ω–∏—è –æ–± –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ö—Ä–∞–Ω—è—Ç—Å—è "–≤ –≥–æ–ª–æ–≤–∞—Ö"

</v-clicks>

---
layout: section
---

# –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

---

# Infrastructure as Code –ø–æ–¥—Ö–æ–¥ üöÄ

<v-clicks>

## –†–∞—Å—à–∏—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∞ –Ω–µ –∑–∞–º–µ–Ω—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã

**IaC = –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏**

- ‚úÖ –ê–¥–º–∏–Ω—ã —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- ‚úÖ –†—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–∏–±–∫–æ–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π

## –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∫–æ–¥–∞**

```hcl
resource "proxmox_vm_qemu" "k8s_worker" {
  name        = "k8s-worker-01"
  target_node = "pve-node-01"
  memory      = 16384
  cores       = 8
  
  network {
    model   = "virtio"
    bridge  = "vmbr0"
    tag     = 100  # VLAN –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞
  }
  
  disk {
    storage = "local-lvm"
    size    = "100G"
  }
}
```

**–û–¥–∏–Ω –∫–ª–∏–∫ ‚Üí –≥–æ—Ç–æ–≤–∞—è VM —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**

</v-clicks>

---

# –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ üõ†Ô∏è

<v-clicks>

## 1. **Proxmox** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏

- –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å!
- –ú–æ—â–Ω—ã–π API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Terraform

## 2. **Packer** - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ VM

- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ü–û –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤

## 3. **Terraform/OpenTofu** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (K8s –∫–ª–∞—Å—Ç–µ—Ä)
- –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π —á–µ—Ä–µ–∑ Git

</v-clicks>

---

# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è üìê

```mermaid
graph TB
    subgraph "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞"
        CODE[Infrastructure Code<br/>Git Repository]
        PACKER[Packer Templates<br/>VM Images]
    end
    
    subgraph "CI/CD"
        FORGEJO[Forgejo Git]
        RUNNER[CI Runner]
        VALIDATE[Validate & Test]
    end
    
    subgraph "Proxmox Infrastructure"
        PROXMOX[Proxmox VE Cluster]
        IMAGES[Image Storage<br/>VM Templates]
        
        subgraph "Kubernetes Cluster"
            K8S_CP[Control Plane Nodes]
            K8S_WN[Worker Nodes]
        end
        
        subgraph "Docker Swarm Clusters"
            SWARM1[Swarm Cluster 1]
            SWARM2[Swarm Cluster 2]
        end
        
        subgraph "Services"
            DB[Databases]
            APP[Applications]
        end
    end
    
    CODE --> FORGEJO
    PACKER --> FORGEJO
    FORGEJO --> RUNNER
    RUNNER --> VALIDATE
    VALIDATE --> PROXMOX
    PACKER -.->|Build Images| IMAGES
    IMAGES --> K8S_CP
    IMAGES --> K8S_WN
    IMAGES --> SWARM1
    IMAGES --> SWARM2
    IMAGES --> DB
    IMAGES --> APP
    
    style CODE fill:#4ade80
    style PACKER fill:#4ade80
    style PROXMOX fill:#3b82f6
    style IMAGES fill:#f59e0b
```

---

# –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è VM: –°–µ–π—á–∞—Å vs –° –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π

<div class="grid grid-cols-2 gap-4">

<div>

## üîß –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (—Ä–∞–±–æ—Ç–∞–µ—Ç!)

```mermaid
graph TD
    A[–ó–∞—è–≤–∫–∞ –Ω–∞ VM] --> B[–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ]
    B --> C[–†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ]
    C --> D[–ù–∞—Å—Ç—Ä–æ–π–∫–∞]
    D --> E[–ü–µ—Ä–µ–¥–∞—á–∞]
    E --> F[–ì–æ—Ç–æ–≤–æ]
    
    style F fill:#22c55e
```

**–ù–∞–¥—ë–∂–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ**

‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å  
‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å  
‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –∞–¥–º–∏–Ω–æ–≤

</div>

<div>

## üöÄ –° –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)

```mermaid
graph TD
    A[–û–ø–∏—Å–∞–Ω–∏–µ –≤ –∫–æ–¥–µ] --> B[Git Push]
    B --> C[–ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞]
    C --> D[–ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ]
    D --> E[–ì–æ—Ç–æ–≤–æ]
    
    style A fill:#22c55e
    style B fill:#22c55e
    style C fill:#22c55e
    style D fill:#22c55e
    style E fill:#22c55e
```

**–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤—Ä–µ–º—è –∞–¥–º–∏–Ω–æ–≤**

‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ VM - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ –ê–¥–º–∏–Ω—ã - –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á  
‚ö° –ë—ã—Å—Ç—Ä–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

</div>

</div>

---

# –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ IaC –ø–æ–¥—Ö–æ–¥–∞ üíé

<v-clicks depth="2">

## üöÄ –°–∫–æ—Ä–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å

- **–°–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ DevOps**: —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö VM –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è
- **–ë—ã—Å—Ç—Ä—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã**: —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞ –º–∏–Ω—É—Ç—ã
- **–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–æ—Å—Ç –±–µ–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç

## üéØ –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∞–¥–º–∏–Ω–æ–≤

- **–ú–µ–Ω—å—à–µ —Ä—É—Ç–∏–Ω—ã**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- **–ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≤–∞–∂–Ω–æ–µ**: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, —Ä–∞–∑–≤–∏—Ç–∏–µ
- **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: –Ω–µ—Ç –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –∑–∞—è–≤–æ–∫

## üìö –ó–Ω–∞–Ω–∏—è –≤ –∫–æ–¥–µ

- **–ö–æ–¥ = –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–∏—Å–∞–Ω–∞ —è–≤–Ω–æ
- **–ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π**: –Ω–æ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –≤—Å—ë –≤ –∫–æ–¥–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞—Ö**: –Ω–µ –∑–∞–≤–∏—Å–∏–º –æ—Ç –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞

</v-clicks>

---

# –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ IaC –ø–æ–¥—Ö–æ–¥–∞ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ) üíé

<v-clicks depth="2">

## üîí –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ï–¥–∏–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã**: –æ–±—Ä–∞–∑—ã –≥–æ—Ç–æ–≤—è—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–µ–∑–¥–µ
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Git
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –≤—Å–µ VM —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ

## üí™ –†–æ—Å—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–æ–º–∞–Ω–¥—ã

- **–ë–æ–ª—å—à–µ –¥–µ–ª–∞–µ–º, –º–µ–Ω—å—à–µ —É—Å—Ç–∞—ë–º**: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω—ã
- **–ë–æ–ª—å—à–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤**: –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏–¥–µ–∏
- **–ë—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–≥–∏—Ä—É–µ–º**: –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –±–∏–∑–Ω–µ—Å–∞

## üîÑ –ì–∏–±–∫–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

- **Dev = Stage = Prod**: –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –º–µ–Ω—å—à–µ —Å—é—Ä–ø—Ä–∏–∑–æ–≤
- **Disaster Recovery**: –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- **–õ–µ–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≥–æ—Ç–æ–≤—ã –∫ —Ä–æ—Å—Ç—É –Ω–∞–≥—Ä—É–∑–∫–∏

</v-clicks>

---

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è üìã

<v-clicks>

## –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°—Ä–æ—á–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ K8s –∫–ª–∞—Å—Ç–µ—Ä–∞

**–°–∏—Ç—É–∞—Ü–∏—è**: –†–µ–∑–∫–∏–π —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏, –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ worker nodes

```bash
# –†–∞–Ω—å—à–µ: —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É, –∂–¥–∞—Ç—å, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –∞–¥–º–∏–Ω–∞–º–∏
# –° IaC: DevOps –¥–µ–ª–∞–µ—Ç —Å–∞–º
terraform apply -var="worker_nodes=5"  # +5 worker nodes –∑–∞ 10 –º–∏–Ω—É—Ç
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–¥–º–∏–Ω—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã –æ—Ç —Å—Ä–æ—á–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è

## –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

**–°–∏—Ç—É–∞—Ü–∏—è**: –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –†–∞–Ω—å—à–µ: —Ä–µ–¥–∫–æ –¥–µ–ª–∞–ª–∏ –∏–∑-–∑–∞ —Ç—Ä—É–¥–æ–µ–º–∫–æ—Å—Ç–∏
# –° IaC: —Å–æ–∑–¥–∞—ë–º –∫–æ–ø–∏—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –ª–µ–≥–∫–æ
terraform apply -var="env=test"  # –ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è prod –∑–∞ 20 –º–∏–Ω—É—Ç
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–µ–Ω—å—à–µ —Ä–∏—Å–∫–æ–≤ –≤ production, –±–æ–ª—å—à–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```hcl
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–∏ —è–≤–Ω–æ –æ–ø–∏—Å–∞–Ω–∞ –≤ –∫–æ–¥–µ
# –ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∏–ª–∏ –∫–æ–ª–ª–µ–≥–∞ –≤–∏–¥–∏—Ç –≤—Å—ë
network {
  model   = "virtio"
  bridge  = "vmbr0"
  tag     = 100  # VLAN –¥–ª—è inter-cluster —Å–≤—è–∑–∏
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ó–Ω–∞–Ω–∏—è –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞—Ö/—É–≤–æ–ª—å–Ω–µ–Ω–∏—è—Ö

</v-clicks>

---

# Packer: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã üì¶

<v-clicks>

## –ß—Ç–æ –¥–∞—ë—Ç Packer?

**–°–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤ VM —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ü–û**

```hcl
# Ubuntu –æ–±—Ä–∞–∑ –¥–ª—è K8s Worker
source "proxmox-iso" "ubuntu-k8s" {
  iso_file         = "local:iso/ubuntu-22.04-server.iso"
  vm_name          = "ubuntu-k8s-worker-template"
  memory           = 4096
  cores            = 2
  
  # –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞
  provisioner "shell" {
    scripts = [
      "scripts/install-docker.sh",
      "scripts/install-kubernetes.sh",
      "scripts/configure-network.sh",
      "scripts/hardening.sh"
    ]
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: VM –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è —Å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ü–û

</v-clicks>

---

# –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è –Ω–∞—à–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ üñºÔ∏è

<v-clicks>

## Kubernetes Worker

- Ubuntu 22.04 LTS
- Docker / containerd
- kubelet, kubeadm, kubectl
- –°–µ—Ç–µ–≤—ã–µ –ø–ª–∞–≥–∏–Ω—ã (Calico/Cilium)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç—ã

## Docker Swarm Node

- Ubuntu 22.04 LTS
- Docker Engine
- Swarm dependencies
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≥–µ–Ω—Ç—ã
- Backup –∞–≥–µ–Ω—Ç—ã

## Database Server

- Ubuntu 22.04 LTS
- PostgreSQL / MySQL
- Backup tools
- Monitoring
- Security hardening

</v-clicks>

---

—Ç–∑—å# –†–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≤ IaC üë•

<v-clicks>

## –ù–µ –∑–∞–º–µ–Ω–∞, –∞ —É—Å–∏–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π! üí™

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º–∏**

### –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è —Ä–æ–ª—å

- üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ø–æ–ª–∏—Ç–∏–∫–∏, —Å–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, compliance
- üìä **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, capacity planning
- üéì **–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞**: –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, best practices, —Å–ª–æ–∂–Ω—ã–µ –∫–µ–π—Å—ã

### –û—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –æ—Ç —Ä—É—Ç–∏–Ω—ã

- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö VM –≤—Ä—É—á–Ω—É—é
- ‚ùå –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚ùå –°—Ä–æ—á–Ω—ã–µ –∑–∞—è–≤–∫–∏ –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
- ‚ùå –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á

### IaC = –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ —Ä—É–∫–∞—Ö –∞–¥–º–∏–Ω–æ–≤

- ‚úÖ –ê–¥–º–∏–Ω—ã —Å–æ–∑–¥–∞—é—Ç —à–∞–±–ª–æ–Ω—ã –∏ –æ–±—Ä–∞–∑—ã
- ‚úÖ –ê–¥–º–∏–Ω—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ Code Review
- ‚úÖ –ê–¥–º–∏–Ω—ã —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–∏, –∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

</v-clicks>

---

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π üîó

<v-clicks>

## –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å:

‚úÖ **Terraform –æ–ø—ã—Ç** - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è K8s –∫–ª–∞—Å—Ç–µ—Ä–∞  
‚úÖ **Proxmox** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏  
‚úÖ **Forgejo** - Git —Å–µ—Ä–≤–µ—Ä  
‚úÖ **ArgoCD** - GitOps –¥–ª—è K8s  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - VictoriaMetrics + Loki  

## –ü—Ä–æ—Å—Ç–æ —Ä–∞—Å—à–∏—Ä—è–µ–º:

```
cluster_initial/
‚îú‚îÄ‚îÄ iac/
‚îÇ   ‚îú‚îÄ‚îÄ kubernetes/          # ‚Üê –£–∂–µ –µ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ proxmox-vms/         # ‚Üê –î–æ–±–∞–≤–∏–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ k8s-nodes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ swarm-clusters/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ databases/
‚îÇ   ‚îî‚îÄ‚îÄ packer/              # ‚Üê –î–æ–±–∞–≤–∏–º
‚îÇ       ‚îú‚îÄ‚îÄ ubuntu-k8s/
‚îÇ       ‚îú‚îÄ‚îÄ ubuntu-swarm/
‚îÇ       ‚îî‚îÄ‚îÄ ubuntu-db/
```

</v-clicks>

---

# –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è üìÖ

<v-clicks depth="2">

## –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –Ω–µ–¥–µ–ª–∏)

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Terraform provider –¥–ª—è Proxmox
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö Packer –æ–±—Ä–∞–∑–æ–≤ (Ubuntu base)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –¥–ª—è IaC

## –§–∞–∑–∞ 2: –ü–∏–ª–æ—Ç (2-3 –Ω–µ–¥–µ–ª–∏)

- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ Swarm –∫–ª–∞—Å—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ IaC
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏
- –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## –§–∞–∑–∞ 3: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ (1-2 –º–µ—Å—è—Ü–∞)

- –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö VM –Ω–∞ IaC
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

## –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ)

- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ–±—Ä–∞–∑–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

</v-clicks>

---

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤ üìä

<div class="grid grid-cols-2 gap-4">

<div>

## üîß –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (—Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ |
|----------|--------|
| **–ì–∏–±–∫–æ—Å—Ç—å** | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ |
| **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω–æ–≤** | üü† –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ç–æ–∫–∞ –∑–∞—è–≤–æ–∫ |
| **–°–∫–æ—Ä–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è** | ‚ö†Ô∏è –õ–∏–Ω–µ–π–Ω–∞—è —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** | ‚ö†Ô∏è –†–µ–¥–∫–æ –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ |
| **–ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π** | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É** | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ |

**–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π**

</div>

<div>

## üöÄ –° –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π (IaC)

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ |
|----------|--------|
| **–ì–∏–±–∫–æ—Å—Ç—å** | ‚úÖ –í—ã—Å–æ–∫–∞—è |
| **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω–æ–≤** | ‚úÖ –°–Ω–∏–∂–µ–Ω–∞, —Ñ–æ–∫—É—Å –Ω–∞ –≤–∞–∂–Ω–æ–º |
| **–°–∫–æ—Ä–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è** | ‚úÖ –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ (–∫–æ–¥) |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** | ‚úÖ –õ–µ–≥–∫–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ |
| **–ü–µ—Ä–µ–¥–∞—á–∞ –∑–Ω–∞–Ω–∏–π** | ‚úÖ –ß–µ—Ä–µ–∑ –∫–æ–¥ |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É** | ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –±—É–¥—É—â–µ–º—É —Ä–æ—Å—Ç—É –∫–æ–º–ø–∞–Ω–∏–∏**

</div>

</div>

---

# –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞: K8s Worker Node üíª

```hcl
# –û–ø–∏—Å–∞–Ω–∏–µ worker node –¥–ª—è Kubernetes
resource "proxmox_vm_qemu" "k8s_worker" {
  count = var.worker_count  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ worker nodes

  name        = "k8s-worker-${count.index + 1}"
  target_node = var.proxmox_node
  clone       = "ubuntu-k8s-template"  # –û–±—Ä–∞–∑ –∏–∑ Packer
  
  # –†–µ—Å—É—Ä—Å—ã
  memory  = 16384  # 16GB RAM
  cores   = 8
  sockets = 1
  
  # –°–µ—Ç—å - –í–°–Å –Ø–í–ù–û –û–ü–ò–°–ê–ù–û!
  network {
    model   = "virtio"
    bridge  = "vmbr0"
    tag     = 100        # VLAN –¥–ª—è K8s –∫–ª–∞—Å—Ç–µ—Ä–∞
    firewall = true
  }
  
  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–µ—Ç—å –¥–ª—è inter-cluster —Å–≤—è–∑–∏
  network {
    model   = "virtio"
    bridge  = "vmbr1"
    tag     = 200        # VLAN –¥–ª—è Swarm —Å–≤—è–∑–∏
  }
  
  # –î–∏—Å–∫–∏
  disk {
    storage = "local-lvm"
    size    = "100G"
    type    = "scsi"
    ssd     = 1
  }
  
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
  provisioner "remote-exec" {
    inline = [
      "kubeadm join ${var.k8s_control_plane_endpoint}",
    ]
  }
  
  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  tags = ["kubernetes", "worker", "production"]
}
```

**–û–¥–∏–Ω —Ä–∞–∑ –æ–ø–∏—Å–∞–ª–∏ - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ!**

---

# –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞: Swarm –∫–ª–∞—Å—Ç–µ—Ä üíª

```hcl
# –ü–æ–ª–Ω—ã–π Swarm –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ 6 –Ω–æ–¥
module "swarm_cluster_production" {
  source = "./modules/swarm-cluster"
  
  cluster_name = "swarm-prod"
  
  # Manager nodes
  manager_count  = 3
  manager_memory = 8192
  manager_cores  = 4
  
  # Worker nodes
  worker_count  = 3
  worker_memory = 16384
  worker_cores  = 8
  
  # –°–µ—Ç—å
  cluster_vlan      = 100  # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞
  inter_cluster_vlan = 200  # –°–≤—è–∑—å —Å K8s
  
  # –û–±—Ä–∞–∑
  template_name = "ubuntu-swarm-template"
  
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Swarm
  auto_init = true
}
```

**–ö–æ–º–∞–Ω–¥–∞ `terraform apply` ‚Üí –≥–æ—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä –∑–∞ 15 –º–∏–Ω—É—Ç!**

---

# –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ –≤—ã–≥–æ–¥—ã üí∞

<v-clicks>

## –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

- üë®‚Äçüíª 2 –Ω–µ–¥–µ–ª–∏ DevOps –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- üìö 1 –Ω–µ–¥–µ–ª—è –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –æ–±—É—á–µ–Ω–∏–µ  
- ü§ù –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ –∞–¥–º–∏–Ω–æ–≤ (–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏)
- **–ò—Ç–æ–≥–æ: ~120 —á–∞—Å–æ–≤ DevOps**

## –í—ã–≥–æ–¥—ã (–ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏)

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ | –° IaC | –í—ã–∏–≥—Ä—ã—à |
|----------|-------------------|-------|---------|
| –°—Ä–æ—á–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ (3 VM) | –ñ–¥—ë–º –∞–¥–º–∏–Ω–æ–≤ | DevOps —Å–∞–º | **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å** |
| –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ | –†–µ–¥–∫–æ –¥–µ–ª–∞–µ–º | –î–µ–ª–∞–µ–º —á–∞—Å—Ç–æ | **–ö–∞—á–µ—Å—Ç–≤–æ** |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è 20 VM | –†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã | –£—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç | –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ | **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 2 —Ä–∞–∑–∞ | –õ–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ | –¢–∞ –∂–µ –∫–æ–º–∞–Ω–¥–∞ | **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** |

## –ì–ª–∞–≤–Ω–∞—è –≤—ã–≥–æ–¥–∞

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É –∫–æ–º–ø–∞–Ω–∏–∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —à—Ç–∞—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** üöÄ

</v-clicks>

---

# –†–∏—Å–∫–∏ –∏ –∏—Ö –º–∏—Ç–∏–≥–∞—Ü–∏—è ‚ö†Ô∏è

<div class="grid grid-cols-2 gap-4">

<div>

## ‚ö†Ô∏è –†–∏—Å–∫–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ**
- –ü—Ä–æ–±–ª–µ–º—ã —Å Proxmox API
- –û—à–∏–±–∫–∏ –≤ Terraform –∫–æ–¥–µ

**–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ**
- –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –∑–Ω–∞–Ω–∏–π –≤ –∫–æ–º–∞–Ω–¥–µ

**–ü—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ**
- –û—à–∏–±–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤

</div>

<div>

## ‚úÖ –ú–∏—Ç–∏–≥–∞—Ü–∏—è

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ**
- Pilot –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- Code review –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ**
- –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤

**–ü—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ**
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –∫–æ–º–∞–Ω–¥—ã
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

</div>

</div>

---

# –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ üåç

<v-clicks>

## –≠—Ç–æ –Ω–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç!

**Netflix** - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ IaC  
- –¢—ã—Å—è—á–∏ VM —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ–¥–æ–º
- Deployment –∑–∞ –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ –Ω–µ–¥–µ–ª—å

**Spotify** - Infrastructure as Code —Å –Ω–∞—á–∞–ª–∞  
- –í—Å–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- Zero downtime deployments

**HashiCorp** (—Å–æ–∑–¥–∞—Ç–µ–ª–∏ Terraform)  
- –ü—Ä–∞–∫—Ç–∏–∫—É—é—Ç IaC –Ω–∞ —Å–µ–±–µ
- –ü—É–±–ª–∏–∫—É—é—Ç best practices

**Google/AWS/Azure**  
- –í—Å–µ –æ–±–ª–∞—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ IaC
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–∞—Å—à—Ç–∞–±–æ–º –≤—Ä—É—á–Ω—É—é

</v-clicks>

---

# –ß—Ç–æ –º—ã –ø–æ–ª—É—á–∏–º –≤ –∏—Ç–æ–≥–µ? üéÅ

<v-clicks depth="2">

## –î–ª—è DevOps/SRE –∫–æ–º–∞–Ω–¥—ã

- ‚ö° –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- üß™ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ —Ä–∏—Å–∫–∞
- üìà –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

## –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

- üéØ –§–æ–∫—É—Å –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–∏
- ‚è∞ –ú–µ–Ω—å—à–µ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∏ —Å—Ä–æ—á–Ω—ã—Ö –∑–∞—è–≤–æ–∫
- üõ°Ô∏è –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

## –î–ª—è –∫–æ–º–ø–∞–Ω–∏–∏

- üìö –ó–Ω–∞–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –∫–æ–¥–µ
- üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —à—Ç–∞—Ç–∞
- üí∞ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## –î–ª—è –≤—Å–µ—Ö

- ü§ù –°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑ Code Review
- üîí –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- üìä –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –ø—Ä–æ–¥—É–∫—Ç

</v-clicks>

---
layout: section
---

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

---

# –î–µ–º–æ: –°–æ–∑–¥–∞–Ω–∏–µ Swarm –∫–ª–∞—Å—Ç–µ—Ä–∞ üé¨

<v-clicks>

## –®–∞–≥ 1: –û–ø–∏—Å—ã–≤–∞–µ–º –∫–ª–∞—Å—Ç–µ—Ä –≤ –∫–æ–¥–µ

```bash
vim terraform/swarm-cluster.tf
```

## –®–∞–≥ 2: –ü–ª–∞–Ω–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
terraform plan
# Output: Will create 6 VMs with proper network configuration
```

## –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω—è–µ–º

```bash
terraform apply
# 10 –º–∏–Ω—É—Ç ‚Üí –≥–æ—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä
```

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º

```bash
ssh swarm-manager-01
docker node ls
# 3 managers + 3 workers, all Ready
```

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞!**

</v-clicks>

---

# –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ üìã

<v-clicks depth="2">

## –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—ç—Ç–∞ –Ω–µ–¥–µ–ª—è)

1. ‚úÖ –û–¥–æ–±—Ä–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
2. üîß –í—ã–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è pilot –ø—Ä–æ–µ–∫—Ç–∞
3. üë• –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö

## –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ (2-4 –Ω–µ–¥–µ–ª–∏)

1. üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Terraform + Packer)
2. üß™ Pilot: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ Swarm –∫–ª–∞—Å—Ç–µ—Ä–∞
3. üìä –û—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ pilot

## –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ (2-3 –º–µ—Å—è—Ü–∞)

1. üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ –Ω–æ–≤—ã–µ VM
2. üìö –û–±—É—á–µ–Ω–∏–µ –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã
3. üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ

1. üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö VM (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)
2. üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
3. üí° –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

</v-clicks>

---
layout: center
class: text-center
---

# –í–æ–ø—Ä–æ—Å—ã? ü§î

---
layout: section
---

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ üîß

## Terraform Provider –¥–ª—è Proxmox

```hcl
terraform {
  required_providers {
    proxmox = {
      source  = "telmate/proxmox"
      version = "~> 2.9"
    }
  }
}

provider "proxmox" {
  pm_api_url      = var.proxmox_api_url
  pm_api_token_id = var.proxmox_token_id
  pm_api_token_secret = var.proxmox_token_secret
  pm_tls_insecure = true
}
```

## Packer Builder

```hcl
packer {
  required_plugins {
    proxmox = {
      version = ">= 1.1.0"
      source  = "github.com/hashicorp/proxmox"
    }
  }
}
```

---

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ë: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è üìÅ

```
cluster_initial/
‚îú‚îÄ‚îÄ iac/
‚îÇ   ‚îú‚îÄ‚îÄ proxmox-vms/                    # –ù–æ–≤–æ–µ: VM –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ k8s-node/               # –ú–æ–¥—É–ª—å –¥–ª—è K8s node
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ swarm-cluster/          # –ú–æ–¥—É–ª—å –¥–ª—è Swarm –∫–ª–∞—Å—Ç–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database-vm/            # –ú–æ–¥—É–ª—å –¥–ª—è DB —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ envs/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dev/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ staging/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prod/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ packer/                         # –ù–æ–≤–æ–µ: –û–±—Ä–∞–∑—ã VM
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ubuntu-k8s-worker/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ubuntu.pkr.hcl
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ubuntu-swarm/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ubuntu-db/
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ kubernetes/                     # –°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ IAC_RUNBOOK.md                  # –ù–æ–≤–æ–µ: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
```

---

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –í: –ü—Ä–∏–º–µ—Ä CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞ üîÑ

```yaml
# .forgejo/workflows/infrastructure.yaml
name: Infrastructure CI/CD

on:
  push:
    paths:
      - 'iac/proxmox-vms/**'

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      
      - name: Terraform Init
        run: terraform init
        working-directory: iac/proxmox-vms/envs/prod
      
      - name: Terraform Validate
        run: terraform validate
      
      - name: Terraform Plan
        run: terraform plan
        env:
          PROXMOX_TOKEN_ID: ${{ secrets.PROXMOX_TOKEN_ID }}
          PROXMOX_TOKEN_SECRET: ${{ secrets.PROXMOX_TOKEN_SECRET }}
  
  apply:
    needs: validate
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Terraform Apply
        run: terraform apply -auto-approve
```

---

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ì: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ IaC üìä

<v-clicks>

## –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

- ‚è±Ô∏è –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è VM (target: < 10 –º–∏–Ω—É—Ç)
- ‚úÖ Success rate (target: > 95%)
- üîÑ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ VM, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —á–µ—Ä–µ–∑ IaC
- üìâ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—É—á–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–∞ VM
- ‚ö° –í—Ä–µ–º—è –æ—Ç commit –¥–æ deployed VM

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```yaml
# VictoriaMetrics
- record: infrastructure:vm_creation_time
  expr: |
    histogram_quantile(0.95,
      rate(terraform_apply_duration_seconds_bucket[5m])
    )

- alert: VMCreationSlow
  expr: infrastructure:vm_creation_time > 600  # > 10 –º–∏–Ω—É—Ç
  annotations:
    summary: "VM creation is taking too long"
```

</v-clicks>

---
layout: center
class: text-center
---

# –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ! üôè

## –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º –Ω–∞—à—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π!

**–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:**  
SRE Team  
m.prigorodov@tetra-soft.ru

---
layout: end
---

# –í–º–µ—Å—Ç–µ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üöÄ

